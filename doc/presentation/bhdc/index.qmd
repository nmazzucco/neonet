---
title: "NeoNet app"
subtitle: "Modelling radiocarbon modelling of the Late Mesolithic - Early Neolithic transition in South-Central and South-Western Europe"
author:
  - name: Thomas Huet
    affiliation: 
      - id: uo
        name: University of Oxford
  - name: Niccolò Mazzucco
    affiliation: Università di Pisa
  - name: Miriam Cubas Morera
    affiliation: Universidad de Alcalá
  - name: Juan F. Gibaja
    affiliation: 
      - id: csic
        name: Consejo Superior de Investigaciones Científicas
  - name: F. Xavier Oms
    affiliation: Universitat de Barcelona
  - name: António Faustino Carvalho
    affiliation: 
      - id: ua
        name: University of Algarve
  - name: Ana Catarina Basílio
    affiliation: 
      - ref: ua
  - name: Elías López-Romero
    affiliation:
      - ref: csic
title-slide-attributes:
    data-background-image: "img/chalkboard.png"
    data-background-size: "90%"
    data-background-opacity: "0.3"
format:
  revealjs: 
    css: https://zoometh.github.io/thomashuet/css/quarto.css
    auto-stretch: false
    code-fold: true
    code-summary: "<small>Code</small>"
    slide-number: true
    chalkboard:
      theme: "whiteboard"
      color: ['rgba(255, 0, 0, 0.3)'] # red
    scrollable: true
    preview-links: auto
    reference-location: document
    footnotes-hover: true
    # self-contained: true
    # embed-resources: true
    logo: https://raw.githubusercontent.com/zoometh/neonet/master/doc/img/neonet.png
    footer: "<em>Big Historical Data Conference</em> <img src='https://raw.githubusercontent.com/zoometh/neonet/master/doc/presentation/bhdc/img/bhdc_avatar.png' style='height: 35px;vertical-align: middle;'> <https://bhdc.earth/> 22-25 November 2023, Jena (Germany)"
    margin: 0
---


## {data-background-iframe="http://shinyserver.cfs.unipi.it:3838/C14dev" background-interactive="true"}

::: {.notes}
NeoNet app is an opensource R Shiny interactive web app which facilitates the selection of dates by providing selection tools for spatial information, chronology, and date accuracy. The map interface offers a mobile and multi-scalar window to study the dynamic of last hunter-gathers / early farmers frontiers. The dataset tend to gather all radiocarbon dates related to the last hunter-gathers / first farmers transition
NB: Global view / clustered / ortho ; Explode cluster / ungroup / OSM
:::

## {}

The NeoNet Atl dataset

```{r}
library(dplyr)
library(DT)
neonet_med <- "https://digitallib.unipi.it/fedora/objects/mag:2627/datastreams/MMb1a4a927461fdd822e923821b8d92371/content"
df.c14 <- read.csv2(neonet_med, sep = "\t", encoding = "UTF-8")
font.size <- "8pt"
df.c14[,!names(df.c14) %in% c("tpq", "taq")] %>% 
  DT::datatable(
    width = "100%",
    rownames = FALSE,
    options=list(
      lengthMenu = list(c(5, 10, 50, -1), 
                        c('5', '10', '50', 'All')),
      paging = T,
      initComplete = htmlwidgets::JS(
        "function(settings, json) {",
        paste0("$(this.api().table().container()).css({'font-size': '", font.size, "'});"),
        "}")
    ) 
  )
```


::: {.notes}
ca. 4,000 radiocarbon dates, coming from ca. 3,000 different archaeological layers, and ca. 800 sites. Documented by ca. 600 different bibliographical references
<div class="img">
![](img/chalkboard.png){width="300" style='horizontal-align: middle;'}
</div>
:::


## {}

<div class="img">
![](img/open-data-joad.png){width="800"}
</div>

::: {.notes}
The first part of this dataset, covering the North Central-Western Mediterranean Basin, has been publish in the *Journal of Open Archaeological Data* 1-year ago.
:::

## {}

<div class="img">
![](img/watersheds-ortho.png){width="1100"}
</div>

::: {.notes}
This published dataset is shown in red. It has been completed by the Southern European Atlantic Basin (in blue).
The decision to divide the research area into distinct watersheds is based on two primary factors. First, it allows for the hierarchical decomposition of river basins into interconnected and nested units. Second, watersheds are crucial as spatial analysis units, facilitating mathematical modeling by incorporating concepts like catchment area, thalweg (shortest path), and natural boundaries.

:::

## {}

<div class="img">
![](img/watersheds-climate.png){width=1000px}
</div>
<div class="captiontext">Beck et al. 2018, Present and future Köppen-Geiger climate classification maps at 1-km resolution, Nature Scientific Data
</div>

::: {.notes}
For example one can study the influence of climates for the spread of Neolithic. The basemap is the Koppen climate classification (actual)
:::


## {}

<div class="img">
![](img/donzere-gis.png){width="1000"}
</div>
<div class="captiontext">Beck et al. 2018, Present and future Köppen-Geiger climate classification maps at 1-km resolution, Nature Scientific Data
</div>

::: {.notes}
The Defile de Donzere is a narrow pass of the Rhone valley between Alps (east) and Massif central (west) and Mediterranean climate (south: Csa  Temperate, dry summer, hot summer) continental (north: Cfb  Temperate, no dry season, warm summer )
:::

## {}

<div class="img">
![](img/donzere-view.png){width=1000px}
<div class="captiontext">Google Earth</div>


::: {.notes}
View of the Defile and the Rhone river, from the South
:::

## {}

![](img/donzere-app-north-and-south.png){width="900"}

::: {.notes}
A selection window can be draw around the Defile, and dates be subset to only get those of LM and EN, with SD < 130. Once done, the dataset counts 70 sites and 353 dates. The latter can be calibrate on the fly by selectiong one of them and opening the calib panel.
:::

## {}

![](img/donzere-app-north-and-south-calib-1.png){width="900"}

::: {.notes}
Dates can be aggregated and seriated by periods, sites and period, archaeological layer (PhaseCode), or plotted individually. Here by periods
:::



## {}

![](img/donzere-app-north-and-south-calib.png){width="900"}

::: {.notes}
Here by sites and period. And the graphics can be exported 
Export the plot
:::


## {}

![](img/donzere-app-north-and-south.png){width="900"}

::: {.notes}
The selected aera and the selected dates can also be exported, both in GeoJSON files
:::

## {}


:::: {.columns}

::: {.column width="50%"}

In the app

![](img/donzere-gis-dates-sub.png){width="600" style='horizontal-align: middle;'}


:::

::: {.column width="50%"}

In a GIS

![](img/donzere-gis-dates.png){width="600" style='horizontal-align: middle;'}

:::


::::

::: {.notes}
These files can be curated and subset in a GIS.
rm: 
Grotte de Camprafaud, lyer 20,Gif-3077
Abri de la Font-des-Pigeons, Escalon C5-F5-C6F6, KN-182
Petites Baties, sect. 4, Beta-103872
Mas Neuf, Erl-11802
Pontcharaud 2, c.3, Ly-7625
Clos de Poujol, c. Sn-Sn1, Ly-2138 (OxA)
:::

## {}

<img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-github.png' style='height: 40px;vertical-align: middle;'><img src='https://raw.githubusercontent.com/zoometh/neonet/master/doc/img/logo_nn_pkg.png' style='height: 50px;vertical-align: middle;'> <span class= smalltext><https://github.com/zoometh/neonet> </span>

:::: {.columns}

::: {.column width="50%"}

![](img/github-neonet-functions-1.png){width="700" style='horizontal-align: middle;'}

:::

::: {.column width="50%"}

```{.r}
neo_spd(df.c14 = df.c14)
```

![](img/figure2.png){width="700" style='horizontal-align: middle;'}

```{.r}
neo_strat(inData = "Roc du Dourgne_2023-07-30.csv")
```

![](https://raw.githubusercontent.com/zoometh/neonet/main/doc/img/app-strati-diag-dourgne-period.png){width="500" style='horizontal-align: middle;'}


:::

::::

::: {.notes}
The Shiny app comes with a serie of functions to model data such as SPD plot or Harris Matrices
:::


## {}

```{.r}
neo_isochr(df.c14 = "neonet-data-2023-10-22.geojson")
```

![](img/donzere_EN-neolithic-isochr.png){width="550" style='horizontal-align: middle;'}

::: {.notes}
For example, the neo_isochr() function creates isochrones contours by interpolation of calibrated radiocarbon dates using, for EN, the minimum median in each site (that is to say the earliest EN) and, for LM, the maximum median in each site (that is to say the latest LM) 
:::

## {}

:::: {.columns}

::: {.column width="40%"}

```{.r}
neo_isochr(df.c14)
```

![](img/donzere_EN-neolithic-isochr.png){width="800"}

:::

::: {.column width="60%"}

```{.r}
neo_isochr(df.c14, selected.per = "LM")
```

![](img/donzere_LM-paleolithic-isochr.png){width="800"}

:::

::::

::: {.notes}
Reciprocally, for LM, the maximum median in each site (that is to say the latest LM) is selected
:::

## {}

<img src='https://raw.githubusercontent.com/zoometh/thomashuet/master/img/app-github.png' style='height: 40px;vertical-align: middle;'><img src='https://raw.githubusercontent.com/zoometh/neonet/master/doc/presentation/bhdc/img/c14bazaar-logo.png' style='height: 50px;vertical-align: middle;'> <span class= smalltext><https://github.com/ropensci/c14bazAAR></span>

:::: {.columns}

::: {.column width="40%"}

![](img/github-c14bazaar-functions-1.png){width="700" style='horizontal-align: middle;'}

:::

::: {.column width="60%"}

![](img/github-c14bazAAR-dbs.png){width="700" style='horizontal-align: middle;'}

:::

::::



::: {.notes}
Among other radiocaborn datasets, Neonet can be harvested by a getter function from the C14bazaar package
:::


## Conclusion

* App and curated dataset of radiocarbon dates for the Mesolithic (<span style="color:blue"><b>LM</b></span>) / Neolithic (<span style="color:red"><b>EN</b></span>) transition
* Open Data + Open Source + Open Access ➡️ **Open Science**
* Highly scalable, reusable and analyzable ➡️ **Reproducibility**

::: {.notes}
* Neonet offers an App and curated dataset of radiocarbon dates for the Mesolithic / Neolithic transition
* The dataset is OD, the app and management functions are OSrc and OA. Compliant with OSci
* Watersheds partition is highly modular (hierarchical decomposition) and interactivity offer a great mean for reproductibility
:::

